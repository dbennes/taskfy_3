<?xml version="1.0" encoding="UTF-8"?>
<configuration>
  <system.webServer>
    <handlers>
      <add name="DjangoHandler"
           path="*"
           verb="*"
           modules="FastCgiModule"
           scriptProcessor="D:\taskfy\venv\Scripts\python.exe|D:\taskfy\venv\Lib\site-packages\wfastcgi.py"
           resourceType="Unspecified"
           requireAccess="Script" />
    </handlers>

    <fastCgi>
      <application fullPath="D:\taskfy\venv\Scripts\python.exe"
                   arguments="D:\taskfy\venv\Lib\site-packages\wfastcgi.py">
        <environmentVariables>
          <!-- Use APENAS um handler: o wsgi do seu projeto -->
          <add name="WSGI_HANDLER" value="taskfy.wsgi.application" />
          <!-- Caminho do seu projeto para import -->
          <add name="PYTHONPATH" value="D:\taskfy" />
          <!-- Log do wfastcgi (crie a pasta logs) -->
          <add name="WSGI_LOG" value="D:\taskfy\logs\wfastcgi.log" />
          <!-- Opcional: ajuda a ver erros reais -->
          <add name="WSGI_BUFFERED" value="1" />
        </environmentVariables>
      </application>
    </fastCgi>

    <!-- Deixe o IIS retornar os erros do Django -->
    <httpErrors existingResponse="PassThrough" />
  </system.webServer>
</configuration>
