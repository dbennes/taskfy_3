{% load static dict_extras %}
{% site_url as SITE_URL %}
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="x-apple-disable-message-reformatting">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Welcome — Taskfy</title>
    <style>
      /* ===== Safe resets ===== */
      html, body { margin:0 !important; padding:0 !important; height:100% !important; width:100% !important; }
      * { -ms-text-size-adjust:100%; -webkit-text-size-adjust:100%; }
      table, td { mso-table-lspace:0pt !important; mso-table-rspace:0pt !important; }
      img { -ms-interpolation-mode:bicubic; border:0; outline:none; text-decoration:none; display:block; }
      a { text-decoration:none; color:inherit; }
      table { border-collapse:collapse !important; }
      .apple-link a { color:inherit !important; text-decoration:none !important; }
      .preheader { display:none; font-size:1px; color:#f6f7f9; line-height:1px; mso-hide:all; max-height:0; max-width:0; opacity:0; overflow:hidden; }

      /* ===== Tokens ===== */
      .bg { background:#f1f3f7; }
      .card { width:100%; max-width:640px; background:#ffffff; border-radius:12px; overflow:hidden; }
      .px { padding-left:24px; padding-right:24px; }
      .py { padding-top:24px; padding-bottom:24px; }
      .brandbar { height:6px; background:#879aff; }

      /* Header */
      .header { background:#ffffff; color:#646464; }
      .ttl { margin:0; font:700 18px Arial,Helvetica,sans-serif; text-align:center; }

      /* Hero */
      .hero-wrap { text-align:center; }
      .hero-img { width:200px; max-width:200px; height:auto; margin:8px auto 0 auto; }
      .hero-title { margin:14px 0 8px 0; font:700 26px/1.2 Arial,Helvetica,sans-serif; color:#0b0b0c; text-align:center; }
      .hero-sub { margin:0 auto; max-width:520px; font:400 11px/1.6 Arial,Helvetica,sans-serif; color:#586174; text-align:center; }

      /* CTA */
      .cta-wrap { margin:18px 0 0 0; text-align:center; }
      .btn { display:inline-block; background:#879aff; color:#ffffff; font-weight:bold; font-family:Arial,Helvetica,sans-serif; font-size:15px; line-height:48px; padding:0 26px; border-radius:999px; }

      /* Footer */
      .footer { background:#2b3036; color:#cbd5e1; }
      .foot { font:400 10px/1.6 Arial,Helvetica,sans-serif; color:#cbd5e1; text-align:center; }

      /* Responsive */
      @media only screen and (max-width:600px){
        .px { padding-left:16px !important; padding-right:16px !important; }
        .py { padding-top:20px !important; padding-bottom:20px !important; }
        .hero-img { width:130px !important; max-width:170px !important; }
        .hero-title { font-size:24px !important; }
        .hero-sub { font-size:8px !important; }
      }

      /* Dark mode */
      @media (prefers-color-scheme: dark) {
        .bg { background:#b3b3b3 !important; }
        .card { background:#0f172a !important; }
        .header { background:#dbdbdb !important; }
        .hero-title { color:#e5e7eb !important; }
        .hero-sub { color:#c7cedb !important; }
        .btn { background:#7e90ff !important; }
        .footer { background:#0b1220 !important; color:#97a6c1 !important; }
        .foot { color:#97a6c1 !important; }
      }
      [data-ogsc] .bg { background:#0b0f14 !important; }
      [data-ogsc] .card { background:#0f172a !important; }
      [data-ogsc] .header { background:#0b1220 !important; }
      [data-ogsc] .btn { background:#7e90ff !important; }
    </style>
    <!--[if mso]><style>.btn{font-family:Arial,Helvetica,sans-serif !important;}</style><![endif]-->
  </head>
  <body class="bg" style="margin:0; padding:0;">
    <div class="preheader">Welcome to Taskfy — click to open your profile and change your password securely.</div>

    <center style="width:100%; background:#f1f3f7;">
      <table role="presentation" width="100%" cellspacing="0" cellpadding="0" border="0">
        <tr>
          <td align="center" style="padding:24px 12px;">

            <!-- Card -->
            <table role="presentation" class="card" cellspacing="0" cellpadding="0" border="0" align="center">
              <tr><td class="brandbar"></td></tr>

              <!-- Header -->
              <tr>
                <td class="header px py" style="padding:16px 24px;" align="center">
                  <h1 class="ttl">TASKFY</h1>
                </td>
              </tr>

              <!-- Hero -->
              <tr>
                <td class="px py hero-wrap" style="padding:28px 24px;" align="center">
                  <img class="hero-img" src="{{ SITE_URL }}{% static 'assets/img/email/masc-3.png' %}" width="200" alt="Taskfy Mascot">
                  <div class="hero-title">Welcome!</div>
                  <p class="hero-sub">
                    Taskfy is ready to speed up your workflow. Click the button below to open your profile.
                  </p>
                  <p class="hero-sub">
                    The <strong>password change modal</strong> will open automatically.
                  </p>

                  <!-- CTA (centered, Outlook-safe) -->
                  <div class="cta-wrap">
                    <table role="presentation" cellspacing="0" cellpadding="0" border="0" align="center">
                      <tr>
                        <td align="center">
                          <!--[if mso]>
                            <v:roundrect xmlns:v="urn:schemas-microsoft-com:vml" xmlns:w="urn:schemas-microsoft-com:office:word"
                              href="{{ SITE_URL }}{% url 'user_profile' %}?openPasswordModal=1"
                              style="height:48px;v-text-anchor:middle;width:240px;" arcsize="50%" stroke="f" fillcolor="#879aff">
                              <w:anchorlock/>
                              <center style="color:#ffffff;font-family:Arial,Helvetica,sans-serif;font-size:15px;font-weight:bold;">
                                Open My Profile
                              </center>
                            </v:roundrect>
                          <![endif]-->
                          <!--[if !mso]><!-- -->
                            <a class="btn" href="{{ SITE_URL }}{% url 'user_profile' %}?openPasswordModal=1" target="_blank">Open My Profile</a>
                          <!--<![endif]-->
                        </td>
                      </tr>
                    </table>
                  </div>

                  <!-- Fallback link -->
                  <div style="margin-top:12px; font:400 12px Arial,Helvetica,sans-serif; color:#778196; text-align:center;">
                    Can’t click? Copy and paste this URL:<br>
                    <span style="word-break:break-all; color:#55607a;">
                      {{ SITE_URL }}{% url 'user_profile' %}?openPasswordModal=1
                    </span>
                  </div>
                </td>
              </tr>

              <!-- Footer -->
              <tr>
                <td class="footer px py" style="padding:18px 24px;" align="center">
                  <div class="foot">
                    © Taskfy — {{ SITE_URL }}<br>
                    This email was sent automatically by the system.<br>
                    Questions? Contact
                    <span class="apple-link">
                      <a href="mailto:daniel.bennis@utci.com.br" style="text-decoration:underline;">daniel.bennis@utci.com.br</a>
                    </span>
                  </div>
                </td>
              </tr>

            </table>
            <!-- /Card -->

          </td>
        </tr>
      </table>
    </center>
  </body>
</html>
